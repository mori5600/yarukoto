{% extends "base.html" %}
{% block content %}
    <div class="docs-page">
        <section class="docs-hero card">
            <div class="card-body">
                <div class="docs-hero-inner">
                    <div>
                        <h1 class="h3 mb-2">Yarukoto docs</h1>
                        <p class="docs-lead mb-3">すぐに使える、シンプルなTodoアプリです。追加・完了・削除・ページ送りが軽快に動きます。</p>
                        <div class="d-flex flex-wrap gap-2">
                            <a class="btn btn-sm btn-primary" href="{% url 'todo:todo_list' %}">Todoへ</a>
                            <a class="btn btn-sm btn-outline-secondary" href="#how">使い方</a>
                            <a class="btn btn-sm btn-outline-secondary" href="#architecture">構成</a>
                            <a class="btn btn-sm btn-outline-secondary" href="#htmx">HTMX</a>
                        </div>
                    </div>
                    <div class="docs-badges">
                        <span class="badge text-bg-light border">Django 6</span>
                        <span class="badge text-bg-light border">SQLite / PostgreSQL</span>
                        <span class="badge text-bg-light border">Bootstrap 5</span>
                        <span class="badge text-bg-light border">HTMX 2</span>
                        <span class="badge text-bg-light border">無限スクロール</span>
                    </div>
                </div>
            </div>
        </section>
        <section id="how" class="docs-section card docs-fade-in docs-delay-1">
            <div class="card-header">使い方</div>
            <div class="card-body">
                <ol class="mb-0">
                    <li>ログインしてTodo一覧にアクセスします（未ログインの場合は自動的にログインページへ）。</li>
                    <li>フォームからTodoを追加します（入力→追加でリストがHTMXで部分更新されます）。</li>
                    <li>チェックボックスで完了/未完了を切り替え、ゴミ箱アイコンで個別削除できます。</li>
                    <li>スクロールすると自動的に次のTodoを読み込みます（無限スクロール）。</li>
                    <li>「全て削除」ボタンで全Todoを一括削除できます。</li>
                </ol>
            </div>
        </section>
        <section id="architecture" class="docs-section card docs-fade-in docs-delay-2">
            <div class="card-header">アーキテクチャ</div>
            <div class="card-body">
                <div class="row g-3">
                    <div class="col-12 col-lg-6">
                        <div class="docs-mini card">
                            <div class="card-body">
                                <h2 class="h6 mb-2">サーバーサイド中心</h2>
                                <p class="text-muted mb-0">HTMLはテンプレートでレンダリングし、必要なところだけHTMXで差し替えます。</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-lg-6">
                        <div class="docs-mini card">
                            <div class="card-body">
                                <h2 class="h6 mb-2">ユーザー認証</h2>
                                <p class="text-muted mb-0">Django標準認証を使用し、Todoは各ユーザーに紐づけて管理されます。</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-lg-6">
                        <div class="docs-mini card">
                            <div class="card-body">
                                <h2 class="h6 mb-2">テンプレートはパーシャル分割</h2>
                                <p class="text-muted mb-0">リスト/アイテム/フォーム/エラーを小さなテンプレートに分けて、更新を最小化します。</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-lg-6">
                        <div class="docs-mini card">
                            <div class="card-body">
                                <h2 class="h6 mb-2">無限スクロール</h2>
                                <p class="text-muted mb-0">HTMXの`revealed`トリガーでスクロール時に次ページを自動読み込みします。</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-lg-6">
                        <div class="docs-mini card">
                            <div class="card-body">
                                <h2 class="h6 mb-2">SQLite / PostgreSQL</h2>
                                <p class="text-muted mb-0">開発はSQLite (WAL)、本番はPostgreSQLにも対応。環境変数で切り替え可能。</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-lg-6">
                        <div class="docs-mini card">
                            <div class="card-body">
                                <h2 class="h6 mb-2">型ヒント / テスト</h2>
                                <p class="text-muted mb-0">包括的な型注釈を使用し、tests/ 配下でモデル/ビュー/統合をカバーします。</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <section id="htmx" class="docs-section card docs-fade-in docs-delay-3">
            <div class="card-header">HTMXのポイント</div>
            <div class="card-body">
                <ul class="mb-0">
                    <li class="mb-2">
                        <strong>部分更新</strong>: リスト本体 <span class="badge text-bg-light border">#todo-list</span> をターゲットに差し替えます。
                    </li>
                    <li class="mb-2">
                        <strong>無限スクロール</strong>: <span class="badge text-bg-light border">hx-trigger="revealed"</span> でスクロール到達時に次ページを自動取得します。
                    </li>
                    <li class="mb-2">
                        <strong>OOBスワップ</strong>: 1つのレスポンスで、リスト・エラー表示・ページネーション情報を同時更新します。
                    </li>
                    <li class="mb-2">
                        <strong>フォームリセット</strong>: <span class="badge text-bg-light border">hx-on::after-request</span> で送信成功時にフォームを自動クリアします。
                    </li>
                    <li>
                        <strong>CSRF</strong>: baseテンプレートで <span class="badge text-bg-light border">hx-headers</span> を設定し、POST/DELETEも安全に送れます。
                    </li>
                </ul>
            </div>
        </section>
        <footer class="docs-footer text-muted small">
            <span>最小構成で、速く・シンプルに。</span>
        </footer>
    </div>
{% endblock content %}
