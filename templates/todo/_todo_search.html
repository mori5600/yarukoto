<div class="d-none d-sm-block">
    <form method="get" action="{% url 'todo:todo_list' %}" class="mb-2">
        <div class="row g-2 align-items-center">
            <div class="col-12 col-md">
                <input type="search"
                       name="q"
                       value="{{ current_q|default:'' }}"
                       class="form-control"
                       placeholder="Todoを検索..." />
            </div>
            <div class="col-auto">
                <div class="todo-status-tabs" role="group" aria-label="ステータスフィルタ">
                    <a href="{% url 'todo:todo_list' %}{% if current_q %}?q={{ current_q }}{% endif %}"
                       class="todo-status-tabs__tab {% if current_status == 'all' %}todo-status-tabs__tab--active{% endif %}">すべて</a>
                    <a href="{% url 'todo:todo_list' %}?status=active{% if current_q %}&q={{ current_q }}{% endif %}"
                       class="todo-status-tabs__tab {% if current_status == 'active' %}todo-status-tabs__tab--active{% endif %}">未完了</a>
                    <a href="{% url 'todo:todo_list' %}?status=completed{% if current_q %}&q={{ current_q }}{% endif %}"
                       class="todo-status-tabs__tab {% if current_status == 'completed' %}todo-status-tabs__tab--active{% endif %}">完了</a>
                </div>
            </div>
            <div class="col-auto">
                <button type="submit" class="btn btn-outline-secondary">検索</button>
            </div>
            {% if current_q %}
                <div class="col-auto">
                    <a href="{% url 'todo:todo_list' %}{% if current_status != 'all' %}?status={{ current_status }}{% endif %}"
                       class="btn btn-outline-secondary">クリア</a>
                </div>
            {% endif %}
        </div>
    </form>
</div>
<details class="todo-details d-sm-none"
         {% if current_q or current_status != 'all' %}open{% endif %}>
    <summary class="todo-details__summary">検索・絞り込み</summary>
    <div class="mt-2">
        <div class="todo-status-tabs todo-status-tabs--mobile mb-2"
             role="group"
             aria-label="ステータスフィルタ">
            <a href="{% url 'todo:todo_list' %}{% if current_q %}?q={{ current_q }}{% endif %}"
               class="todo-status-tabs__tab {% if current_status == 'all' %}todo-status-tabs__tab--active{% endif %}">すべて</a>
            <a href="{% url 'todo:todo_list' %}?status=active{% if current_q %}&q={{ current_q }}{% endif %}"
               class="todo-status-tabs__tab {% if current_status == 'active' %}todo-status-tabs__tab--active{% endif %}">未完了</a>
            <a href="{% url 'todo:todo_list' %}?status=completed{% if current_q %}&q={{ current_q }}{% endif %}"
               class="todo-status-tabs__tab {% if current_status == 'completed' %}todo-status-tabs__tab--active{% endif %}">完了</a>
        </div>
        <form method="get" action="{% url 'todo:todo_list' %}">
            {% if current_status != 'all' %}<input type="hidden" name="status" value="{{ current_status }}" />{% endif %}
            <div class="row g-2 align-items-center">
                <div class="col">
                    <input type="search"
                           name="q"
                           value="{{ current_q|default:'' }}"
                           class="form-control"
                           placeholder="Todoを検索..." />
                </div>
                <div class="col-auto">
                    <button type="submit" class="btn btn-outline-secondary">検索</button>
                </div>
                {% if current_q %}
                    <div class="col-auto">
                        <a href="{% url 'todo:todo_list' %}{% if current_status != 'all' %}?status={{ current_status }}{% endif %}"
                           class="btn btn-outline-secondary">クリア</a>
                    </div>
                {% endif %}
            </div>
        </form>
    </div>
</details>
