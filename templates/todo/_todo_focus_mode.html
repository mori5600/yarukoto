<!-- フォーカスモード用のフルスクリーンオーバーレイ -->
<div id="todo-focus-mode" class="todo-focus-mode">
    <div class="todo-focus-mode__header">
        <button class="todo-focus-mode__close"
                hx-get="{% url 'todo:exit_focus_mode' %}"
                hx-target="#todo-focus-mode"
                hx-swap="outerHTML"
                title="フォーカスモード終了 (Esc)">
            <svg xmlns="http://www.w3.org/2000/svg"
                 width="24"
                 height="24"
                 fill="currentColor"
                 viewBox="0 0 16 16">
                <path d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8z" />
            </svg>
        </button>
        <button class="todo-focus-mode__timer-toggle btn btn-sm btn-outline-secondary"
                id="timer-toggle"
                title="Pomodoroタイマーを表示/非表示">
            <svg xmlns="http://www.w3.org/2000/svg"
                 width="16"
                 height="16"
                 fill="currentColor"
                 viewBox="0 0 16 16">
                <path d="M8.5 5.6a.5.5 0 1 0-1 0v2.9h-3a.5.5 0 0 0 0 1H8a.5.5 0 0 0 .5-.5z" />
                <path d="M6.5 1A.5.5 0 0 1 7 .5h2a.5.5 0 0 1 0 1v.57c1.36.196 2.594.78 3.584 1.64l.012-.013.354-.354-.354-.353a.5.5 0 0 1 .707-.708l1.414 1.415a.5.5 0 1 1-.707.707l-.353-.354-.354.354-.013.012A7 7 0 1 1 7 2.071V1.5a.5.5 0 0 1-.5-.5M.86 5.387A7 7 0 1 0 13.14 10.613 7 7 0 0 0 .86 5.387" />
            </svg>
            タイマー
        </button>
        <div class="todo-focus-mode__timer todo-focus-mode__timer--hidden"
             id="pomodoro-timer">
            <span id="timer-display">25:00</span>
            <button id="timer-start" class="btn btn-sm btn-success">開始</button>
            <button id="timer-pause"
                    class="btn btn-sm btn-warning todo-focus-mode__timer-pause--hidden">一時停止</button>
            <button id="timer-reset" class="btn btn-sm btn-secondary">リセット</button>
        </div>
    </div>
    <div class="todo-focus-mode__content">
        <label class="todo-focus-mode__checkbox">
            <input type="checkbox"
                   class="form-check-input form-check-input--large"
                   {% if todo_item.completed %}checked{% endif %}
                   hx-post="{% url 'todo:update_todo_item' todo_item.id %}?focus=1"
                   hx-target="#todo-focus-item"
                   hx-swap="outerHTML" />
        </label>
        <div id="todo-focus-item" class="todo-focus-mode__text">
            <h1 class="{% if todo_item.completed %}text-decoration-line-through{% endif %}">{{ todo_item.description }}</h1>
            <div class="todo-focus-mode__meta">
                <span>作成: {{ todo_item.created_at|date:"Y/m/d H:i" }}</span>
                <span>更新: {{ todo_item.updated_at|date:"Y/m/d H:i" }}</span>
            </div>
        </div>
    </div>
    <div class="todo-focus-mode__actions">
        <button class="btn btn-outline-primary btn-lg"
                hx-get="{% url 'todo:edit_todo_item' todo_item.id %}?focus=1"
                hx-target="#todo-focus-item"
                hx-swap="outerHTML">編集</button>
        <button class="btn btn-outline-danger btn-lg"
                hx-delete="{% url 'todo:delete_todo_item' todo_item.id %}?focus=1"
                hx-target="#todo-focus-mode"
                hx-swap="outerHTML"
                hx-confirm="本当に削除しますか？">削除</button>
    </div>
</div>
